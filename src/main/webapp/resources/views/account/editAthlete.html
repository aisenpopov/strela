
<section class="md-well well--inset-2 athlete-page">
    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <div class="row text-md-left inset-1 flow-offset-2">
                    <div class="col-sm-preffix-3 col-sm-6 col-md-preffix-0 col-md-12 col-md-push-1">
                        <!--<div class="divider divider-small offset-4 md-visible"></div>-->
                    </div>
                </div>
            </div>
            <div class="col-md-7 relative">
                <div>
                    <h2 class="offset-6">Атлет</h2>
                    <form class='athlete rd-mailform' name="athleteForm">
                        <fieldset>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Имя<span>*</span></span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.firstName)">
                                            <span class="form-error" ng-show="athleteForm.firstName.$error.required">Поле не может быть пустым</span>
                                            <span class="form-error" ng-show="athleteForm.firstName.$error.server">{{athleteForm.firstName.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="firstName"
                                               ng-model="athlete.firstName" ng-required="true"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Фамилия</span>
                                        <input type="text" name="lastName" ng-model="athlete.lastName"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Отчество</span>
                                        <input type="text" name="middleName" ng-model="athlete.middleName"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Дата рождения</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.birthday)">
                                            <span class="form-error" ng-show="athleteForm.birthday.$error.pattern">Неправильный формат</span>
                                            <span class="form-error" ng-show="athleteForm.birthday.$error.server">{{athleteForm.birthday.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="birthday" ng-datepicker
                                               ng-model="athlete.birthday" ng-pattern="/^(0?[1-9]|[12][0-9]|3[01])[\.](0?[1-9]|1[012])[\.]\d{4}$/"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <span class="title">Пол</span>
                                    <div class="inline-group">
                                        <label class="radio">
                                            <input type="radio" name="sex" ng-model="athlete.sex" value="male"/>
                                            <i></i>
                                            Мужской
                                        </label>
                                        <label class="radio">
                                            <input type="radio" name="sex" ng-model="athlete.sex" value="female"/>
                                            <i></i>
                                            Женский
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <div class="inline-group">
                                        <label class="checkbox">
                                            <input type="checkbox" name="instructor" ng-model="athlete.instructor"/>
                                            <i></i>
                                            Инструктор
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <div class="inline-group">
                                        <label class="checkbox">
                                            <input type="checkbox" name="retired" ng-model="athlete.retired"/>
                                            <i></i>
                                            В отставке
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Вес(кг)</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.weight)">
                                            <span class="form-error" ng-show="athleteForm.weight.$error.number">Введите корректное число</span>
                                        </div>
                                        <input type="number" name="weight" ng-model="athlete.weight"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Рост(см)</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.height)">
                                            <span class="form-error" ng-show="athleteForm.height.$error.number">Введите корректное число</span>
                                        </div>
                                        <input type="number" name="height" ng-model="athlete.height"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Размер ГИ</span>
                                        <input type="text" name="giSize" ng-model="athlete.giSize"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Размер рашгарда</span>
                                        <input type="text" name="rashguardSize" ng-model="athlete.rashguardSize"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Номер паспорта</span>
                                        <input type="text" name="passportNumber" ng-model="athlete.passportNumber"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Дата начала тренировок</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.startDate)">
                                            <span class="form-error" ng-show="athleteForm.startDate.$error.pattern">Неправильный формат</span>
                                            <span class="form-error" ng-show="athleteForm.startDate.$error.server">{{athleteForm.startDate.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="startDate" ng-datepicker
                                               ng-model="athlete.startDate" ng-pattern="/^(0?[1-9]|[12][0-9]|3[01])[\.](0?[1-9]|1[012])[\.]\d{4}$/"/>
                                    </label>
                                </div>
                            </div>

                            <div class="divider divider-small offset-4"></div>

                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Команда</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.team)">
                                            <span class="form-error" ng-show="athleteForm.team.$error.server">{{athleteForm.team.serverErrorMessage}}</span>
                                        </div>
                                        <ui-select ng-model="athlete.team" name="team" theme="select2" title="Выберите команду" ng-controller="SelectCtrl">
                                            <ui-select-match allow-clear="true" placeholder="Выберите команду">{{$select.selected.text}}</ui-select-match>
                                            <ui-select-choices repeat="team in items" position="down"
                                                               refresh="search('team', $select.search)" refresh-delay="500">
                                                <div ng-bind-html="team.text | highlight: $select.search"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Регион регистрации</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.registrationRegion)">
                                            <span class="form-error" ng-show="athleteForm.registrationRegion.$error.server">{{athleteForm.registrationRegion.serverErrorMessage}}</span>
                                        </div>
                                        <ui-select ng-model="athlete.registrationRegion" name="registrationRegion" theme="select2" title="Выберите регион" ng-controller="SelectCtrl">
                                            <ui-select-match allow-clear="true" placeholder="Выберите регион">{{$select.selected.text}}</ui-select-match>
                                            <ui-select-choices repeat="registrationRegion in items" position="down"
                                                               refresh="search('registrationRegion', $select.search)" refresh-delay="500">
                                                <div ng-bind-html="registrationRegion.text | highlight: $select.search"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                    </label>
                                </div>
                            </div>

                            <div class="divider divider-small offset-4"></div>

                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Эл. почта</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.email)">
                                            <span class="form-error" ng-show="athleteForm.email.$error.pattern">Введите валидный e-mail</span>
                                            <span class="form-error" ng-show="athleteForm.email.$error.server">{{athleteForm.email.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="email"
                                                ng-model="athlete.email" ng-pattern="/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Телефон</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.phoneNumber)">
                                            <span class="form-error" ng-show="athleteForm.phoneNumber.$error.pattern">Введите валидный номер телефона</span>
                                            <span class="form-error" ng-show="athleteForm.phoneNumber.$error.server">{{athleteForm.phoneNumber.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="phoneNumber"
                                               ng-model="athlete.phoneNumber" ng-pattern="/^[0-9-()+]+$/"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Мобильный телефон</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.mobileNumber)">
                                            <span class="form-error" ng-show="athleteForm.mobileNumber.$error.pattern">Введите валидный номер телефона</span>
                                            <span class="form-error" ng-show="athleteForm.mobileNumber.$error.server">{{athleteForm.mobileNumber.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="mobileNumber"
                                               ng-model="athlete.mobileNumber" ng-pattern="/^[0-9-()+]+$/"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Vkontakte</span>
                                        <input type="text" name="vk" ng-model="athlete.vk"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Facebook</span>
                                        <input type="text" name="facebook" ng-model="athlete.facebook"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Instagram</span>
                                        <input type="text" name="instagram" ng-model="athlete.instagram"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Skype</span>
                                        <input type="text" name="skype" ng-model="athlete.skype"/>
                                    </label>
                                </div>
                            </div>

                            <div class="divider divider-small offset-4"></div>

                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Login</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.personLogin)">
                                            <span class="form-error" ng-show="athleteForm.personLogin.$error.minlength">Длина должна быть больше 3</span>
                                            <span class="form-error" ng-show="athleteForm.personLogin.$error.maxlength">Длина должна быть меньше 20</span>
                                            <span class="form-error" ng-show="athleteForm.personLogin.$error.server">{{athleteForm.personLogin.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="personLogin" ng-model="athlete.person.login"
                                               ng-minlength="3" ng-maxlength="20"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Новый пароль</span>
                                        <div class="field-error" ng-show="isInvalid(athleteForm.personPassword)">
                                            <span class="form-error" ng-show="athleteForm.personPassword.$error.minlength">Длина должна быть больше 6</span>
                                            <span class="form-error" ng-show="athleteForm.personPassword.$error.maxlength">Длина должна быть меньше 20</span>
                                            <span class="form-error" ng-show="athleteForm.personPassword.$error.server">{{athleteForm.personPassword.serverErrorMessage}}</span>
                                        </div>
                                        <input type="text" name="personPassword" ng-model="athlete.person.password"
                                               ng-minlength="6" ng-maxlength="20"/>
                                    </label>
                                </div>
                            </div>
                            <div class="row flow-offset-4" ng-if="person.admin">
                                <div class="col-md-12">
                                    <div class="inline-group">
                                        <label class="checkbox">
                                            <input type="checkbox" name="personAdmin" ng-model="athlete.person.admin"/>
                                            <i></i>
                                            Админ
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <div class="inline-group">
                                        <label class="checkbox">
                                            <input type="checkbox" name="personDisabled" ng-model="athlete.person.disabled"/>
                                            <i></i>
                                            Заблокировать
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="row flow-offset-4" ng-if="athlete.id">
                                <div class="col-md-12">
                                    <span class="title">Тарифы</span>
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr>
                                            <th class="col-lg-1">Тариф</th>
                                            <th class="col-lg-2">Купон</th>
                                            <th class="col-lg-1"><i class="glyphicon glyphicon-cog"></i></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in athleteTariffs">
                                            <td>{{item.tariff ? item.tariff.name : ''}}</td>
                                            <td>{{item.coupon ? item.coupon.name : ''}}</td>
                                            <td>
                                                <a href="#" ng-click="editAthleteTariff(item.id, $event)" title="Редактировать">
                                                    <i class="glyphicon glyphicon-edit"></i>
                                                </a>
                                                <a href="#" ng-click="removeAthleteTariff(item.id, $event)" title="Удалить">
                                                    <i class="glyphicon glyphicon-remove"></i>
                                                </a>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="mfControls btn-group text-center text-md-left" ng-if="athlete.id">
                                <button class="btn btn-md btn-default" ng-click="addAthleteTariff()">Добавить</button>
                            </div>
                            <div class="row flow-offset-4">
                                <div class="col-md-12">
                                    <label>
                                        <span class="title">Комментарий</span>
                                        <textarea name="comment" ng-model="athlete.comment"/>
                                    </label>
                                </div>
                            </div>

                            <div class="divider divider-small offset-4"></div>
                            <div class="mfControls btn-group text-center text-md-left">
                                <button class="btn btn-md btn-default" ng-click="saveAthlete()">Сохранить</button>
                                <a ng-href="/#/account/athlete" class="btn btn-md">Список</a>
                            </div>
                        </fieldset>
                    </form>
                </div>


                <div class="divider divider-big divider-md-vertical divider-left md-visible"></div>
            </div>
        </div>
    </div>
</section>
